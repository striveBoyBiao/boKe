<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.siyuruoli.dao.ContentMapper">

    <!--分页查询碎言碎语界面数据-->
    <select id="findDoing" parameterType="Map" resultType="ContentDO">
      SELECT BC.CID,
              BC.CONTENT,
              DATE_FORMAT(BC.GTM_CREATE, '%Y-%m-%d') GTMCREATE
      FROM BLOG_CONTENT BC
      WHERE BC.CATEGORIES='5'
      LIMIT #{pageBegin},#{pageSize}
    </select>
    <!--查询碎言碎语界面数据数量-->
    <select id="queryCount" parameterType="Map" resultType="int">
        SELECT count(*)
        FROM BLOG_CONTENT BC
        WHERE BC.CATEGORIES='5'
    </select>
    <!--查询慢生活数据数量-->
    <select id="queryLifeCount" parameterType="Map" resultType="int">
        SELECT count(*)
        FROM BLOG_CONTENT BC
        WHERE BC.CATEGORIES in ('1','2','3','4')
    </select>


    <!--分页查询慢生活界面数据-->
    <select id="findLife" parameterType="Map" resultType="org.apache.commons.collections.map.CaseInsensitiveMap">
        SELECT BC.CID,
                BC.CONTENT,
                DATE_FORMAT(BC.GTM_CREATE, '%Y-%m-%d') GTMCREATE,
                bc.title,
                sd.name typename,
                bc.author
        FROM BLOG_CONTENT BC
        left join sys_dict SD on sd.type='blog_type' and sd.value=bc.CATEGORIES
        WHERE BC.CATEGORIES in ('1','2','3','4')
        <if test="cid!=null and cid!=''">and bc.cid=#{cid}</if>
        <if test="type!=null and type!=''">and bc.CATEGORIES=#{type}</if>
        LIMIT #{pageBegin},#{pageSize}
    </select>

    <!--查询慢生活详细界面数据-->
    <select id="findlifeDetails" parameterType="Map" resultType="org.apache.commons.collections.map.CaseInsensitiveMap">
        SELECT BC.CID,
        BC.CONTENT,
        DATE_FORMAT(BC.GTM_CREATE, '%Y-%m-%d') GTMCREATE,
        bc.title,
        sd.name typename,
        bc.author
        FROM BLOG_CONTENT BC
        left join sys_dict SD on sd.type='blog_type' and sd.value=bc.CATEGORIES
        WHERE BC.CATEGORIES in ('1','2','3','4')
        <if test="cid!=null and cid!=''">and bc.cid=#{cid}</if>
        <if test="type!=null and type!=''">and bc.CATEGORIES=#{type}</if>
    </select>

</mapper>